{% extends "base.html" %}

{% block title %}{{ image.title }}{% endblock %}

{% block content %}
<div class="image-view">
    <div class="image-header">
        <h1>{{ image.title }}</h1>
        <div class="image-meta">
            <span>By <a href="{{ url_for('main.profile', username=image.author.username) }}">{{ image.author.username
                    }}</a></span>
            <span>{{ image.upload_date.strftime('%B %d, %Y') }}</span>
            <span>{{ image.views }} views</span>
        </div>
    </div>

    <div class="image-content">
        <img src="{{ url_for('static', filename='uploads/' + image.filename) }}" alt="{{ image.title }}">
    </div>

    <div class="image-info">
        {% if image.description %}
        <div class="description">
            <h3>Description</h3>
            <p>{{ image.description }}</p>
        </div>
        {% endif %}

        {% if image.tags %}
        <div class="tags">
            <h3>Tags</h3>
            <div class="tag-list">
                {% for tag in image.tags %}
                <a href="{{ url_for('main.tag', tag_name=tag.name) }}" class="tag">{{ tag.name }}</a>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>

    {% if current_user.id == image.user_id %}
    <div class="image-actions">
        <a href="{{ url_for('images.edit', image_id=image.id) }}" class="button">Edit</a>
        <form action="{{ url_for('images.delete', image_id=image.id) }}" method="POST" class="delete-form">
            <button type="submit" class="button delete"
                onclick="return confirm('Are you sure you want to delete this image?')">Delete</button>
        </form>
    </div>
    {% endif %}
</div>
{% endblock %}